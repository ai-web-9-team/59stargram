<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>


    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

    <!-- icon import -->
    <script src="https://kit.fontawesome.com/989420847f.js" crossorigin="anonymous"></script>


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>


    <!--    google font-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dongle&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@500&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cookie&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poor+Story&display=swap" rel="stylesheet">

    <!--css 파일 불러오기!-->
    <link href="/static/css/common.css" rel="stylesheet" type="text/css"/>
    <link href="/static/css/main.css" rel="stylesheet" type="text/css"/>

    <!--js 파일 불러오기-->
    <script defer src="/static/js/common.js"></script>
    <script defer src="/static/js/main.js"></script>

    <!--파비콘 적용-->
    <link rel="shortcut icon" href="/static/images/favicon_instagram.ico">

    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>


    <title>59 Stagram</title>
</head>

<body>

<!-- to use bootstrap -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>

<!--헤더 부분-->
<div class="main_header" id="main_header">
    <div class="header_body">
        <div class="logo_box">
            <button class="logo" onClick="window.location.reload()">59 Stagram</button>
        </div>
        <div class="search_box">
            <button class="search_active_button" id="search_active_button"
                    onclick="active_search_input_box()" style="cursor: text;"></button>
            <img class="search_icon" id="search_icon"
                 src="/static/images/icon_search.png">
            <input id="search_input_box" aria-label="입력 검색" class="search_input_box" autocapitalize="none"
                   placeholder="검색" type="text" value="">
            <div id="search_recommend" class="invisible">
                {% for info in feeds_info %}
                <div class="item"><a href="">
                    <img class="search_recommend_user_img" src="/static/images/img_profile.jpg"
                         alt="Profile Image">
                </a>비슷한 사용자 이름 1
                </div>
                {% endfor %}
            </div>
        </div>
        <div class="header_icon_box">
            <ul>
                <button class="home" onClick="window.location.reload()"><i class="fas fa-house"></i>
                </button>
                <button class="add_feed" id="add_feed_button" onclick="add_feed_on()"><i
                        class="fa-regular fa-square-plus"></i>
                </button>
                <button class="explore" id="explore_button"><i class="fa-regular fa-compass"></i>
                </button>
                <button class="notice" id="notice_button" onclick="alert_button_on()"><i
                        class="fa-regular fa-heart"></i>
                </button>
                <a style="margin-left: 5px;" href="{{url_for('user', user_name=info['UserName'])}}">
                    <img class="img_circle" width="24px" src="/static/images/img_profile.jpg" />
                </a>
            </ul>
        </div>
    </div>
</div>


<!--본문 부분-->
<div class="main_body" id="main_body">
    <div class="post_box" id-="post_box">
        <div class="story_box">
            <div class="card" id="card">
                <button type="button" class="bg_slide_button" id="bg_slide_button_left"
                        onclick="move_story_slide(0)">
                    <img width="12px" height="12px"
                         style="margin: -5px 0px 0px -2px"
                         src="/static/images/button_story_slide_left.png">
                </button>
                <button type="button" class="bg_slide_button" id="bg_slide_button_right"
                        onclick="move_story_slide(1)">
                    <img width="12px" height="12px"
                         style="margin: -5px 0px 0px -2px"
                         src="/static/images/button_story_slide_right.png">
                </button>
                <div class="card-body" id="stories">
                    <div style="width: 10px;"></div>
                    {% for info in feeds_info %}
                    <div class="story">
                        <div class="story_img_box" id="story{{loop.index}}" onclick="clickStory(id)" style="cursor: pointer;">
                            <img class="img_circle story_img_outline" width="56px" height="56px"
                                 src="data:image/jpg;base64, {{ info[2] }}">
                        </div>
                        <p class="story_id">{{info[0]}}</p>
                    </div>
                    {% endfor %}
                </div>

            </div>
        </div>


        {% for info in feeds_info %}
        <article class="feed_border" id="feed{{loop.index}}">
            <div class="feed">
                <header class="feed_header">
                    <div class="feed_header_container">
                        <div class="user_photo">
                            <a href="">
                                <img class="profile_img" src="data:image/jpg;base64, {{ info[3] }}"
                                     alt="Profile Image">
                            </a>
                        </div>
                        <div class="user_profile">
                            <div class="user_id">{{info[0]}}</div>
                            <div class="user_location">{{info[1]}}</div>
                            <div id="post_id" style="display: None">{{info[-1]}}</div>
                        </div>
                        <div class="ellipsis_nav">
                            <!--피드의 더보기 모달은 피드 주인이 누구냐에 따라 다르게 띄움-->
                            {% if info[0] == 'hee123' %}
                            <button type="button" class="ellipsis" onclick="more_button_on(0)">
                                <i class="fa-solid fa-ellipsis"></i></button>
                            {% elif info[0] == 'kimphysicsman' %}
                            <button type="button" class="ellipsis" onclick="more_button_on(1)">
                                <i class="fa-solid fa-ellipsis"></i></button>
                            {% else %}
                            <button type="button" class="ellipsis" onclick="more_button_on(2)">
                                <i class="fa-solid fa-ellipsis"></i></button>
                            {% endif %}
                        </div>
                    </div>
                </header>
                <div class="photos">
                    <div class="photo"><img class="photo" id="photo{{loop.index}}" ondblclick="fadeOut(id)" alt="게시물"
                                            src="data:image/jpg;base64, {{ info[2] }}"
                    /></div>
                    <div class="behind_photo"><i class="fa-solid fa-heart"></i></div>
                </div>
                <div class="reaction">
                    <div class="heart">
                        <i class="fa-regular fa-heart"></i>
                    </div>
                    {% if info[7] == False %}
                    <div class="i_like" id="my_like{{loop.index}}" style="display: none;">
                        나 외에도
                    </div>
                    {% else %}
                    <div class="i_like" style="display: block;">
                        나 외에도
                    </div>
                    {% endif %}
                    <div class="like_count" id="like_count">
                        {{info[5]}}명 이 좋아요를 눌렀습니다.

                    </div>
                </div>
                <div class="comments">
                    <div class="comment"><i class="fa-regular fa-message"></i></div>
                    <div class="one_comment">총 {{info[6]}} 개의 댓글이 달렸습니다.
                    </div>
                </div>
                <div class="post">
                    <div name="{{info[0]}}" id="about_post" class="about_post">
                        {{info[4]}}
                    </div>
                </div>

            </div>
        </article>
        {% endfor %}


    </div>
    <div class="profile_box" id="profile_box">
        <div class="my_account">
            <div>
                <a href="/user-page">
                    <img class="my_profile_img" src="/static/images/img_songhee_profile.png"
                         alt="Profile Image">
                </a>
            </div>
            <div class="my_info">
                <div class="my_id" style="font-weight: bold">{{info['UserName']}}</div>
                <div class="my_name" style="color: #909090;">{{info['Name']}}</div>
            </div>
            <div class="logout_button">
                <a href="javascript:void(0);" onclick="logout();">로그아웃</a>
            </div>
        </div>
        <div class="recommend_and_footer">
            <ul class="list-group">
                {% for info in recommend_info %}
                <li class="list-group-item">
                    <div class="recommend_user_photo">
                        <a href="">
                            <img class="recommend_profile_img" src="data:image/jpg;base64, {{ info[2] }}"
                                 alt="Profile Image">
                        </a>
                    </div>
                    <div class="user_info">
                        <div class="user_id">{{info[0]}}</div>
                        <div class="user_name">{{info[1]}}</div>
                    </div>
                </li>
                {% endfor %}
            </ul>
        </div>
        <div class="footer" id="footer">
                <a href="http://kimphysicsman.shop/" target="_blank">소개</a> ·
                <a href="">도움말</a> ·
                <a href="">홍보 센터</a> ·
                <a href="">API</a> ·
                <a href="">채용 정보</a>
                <br>
                <a href="">개인정보처리방침</a> ·
                <a href="">약관</a> ·
                <a href="">위치</a> ·
                <a href="">인기 계정</a> ·
                <br>
                <a href="">해시태그</a> ·
                <a href="">언어</a>
                <br>
                <br>
                <p>© 2022 59 STAGRAM FROM OGUOGU TEAM</p>
            </div>
    </div>
</div>

<!--더보기 모달창-->
<div class="more_button_box">
    <div class="more_button_body">
        <div class="more_button_title">
            <div class="more_button_quit_box" onclick="more_button_quit()" style="cursor: pointer;">
                <i class="fa-solid fa-xmark"></i>
            </div>
            <div class="more_button_title_box" style="line-height: 100%; text-align: center;">
                <div class="more_button_title_text"><h5>
                </h5></div>
            </div>
        </div>
        <div>
            <div class="card">
                <div class="card-header1" style="cursor: pointer;">
                </div>
            </div>
            <div class="card">
                <div class="card-header2" style="cursor: pointer; ">
                </div>
            </div>
            <div class="card">
                <div class="card-header3" style="cursor: pointer;">
                </div>
            </div>
            <div class="card">
                <div class="card-header4" style="cursor: pointer;">
                </div>
            </div>
        </div>
    </div>
</div>
<!--알림 모달창-->
<div class="alert_button_box">
    <div class="alert_button_body">
        <div class="alert_button_title">
            <div class="alert_button_quit_box" onclick="alert_button_quit()" style="cursor: pointer;">
                <i class="fa-solid fa-xmark"></i>
            </div>
            <div class="alert_button_title_box" style="line-height: 100%; text-align: center;">
                <div class="alert_button_title_text"><h5>

                </h5></div>
            </div>
        </div>
        <div>
            <div class="card">
                <div class="card-header1">

                </div>
            </div>
            <div class="card">
                <div class="card-header2">

                </div>
            </div>
            <div class="card">
                <div class="card-header3">

                </div>
            </div>
            <div class="card">
                <div class="card-header4">

                </div>
            </div>
            <div class="card">
                <div class="card-header5">

                </div>
            </div>
        </div>
    </div>
</div>

<!--게시물 업로드 모달창-->
<div class="add_feed_box">
    <div class="add_feed_body">
        <div class="add_feed_title">
            <div class="add_feed_quit_box" onclick="add_feed_quit()" style="cursor: pointer;">
                <i class="fa-solid fa-xmark"></i>
            </div>
            <div class="add_feed_title_box" style="line-height: 100%; text-align: center;">
                <div class="add_feed_title_text"><h5>
                    게시할 피드를 작성해주세요 !
                </h5></div>
            </div>
        </div>
        <div>
            <div style="background-color: rgba(0, 0, 0, 0.1); width: 100%; display: block; font-size: 13px;
            border: black 1px solid;">
                <input type="file" id="file1" name="file" accept="image/*"
                       onchange="Reader(event, 1)" style="padding-left: 10%; margin: 10px 0px 10px 0px;">

            </div>
            <div style="background-color: rgba(0, 0, 0, 0.1);">
                <img id="preview1" style="width: 150px; height: 200px; margin: 20px 5px 0px 5px;"/>
            </div>
            <div style="background-color: rgba(0, 0, 0, 0.1); font-size: 15px;">
                <textarea id="description" style="width: 600px; height: 200px; margin: 20px 0px 20px 0px; padding: 10px;"></textarea>
            </div>
            <div class="card" style="background-color: rgba(0, 0, 0, 0.1); display: block;">
                <button class="modal_btn" style="width: 10%;" onclick="feed_upload()">업로드</button>
                <button class="modal_btn" style="width: 10%;" onclick="add_feed_quit()">취소</button>
            </div>
            <script>
                var Reader = function (event, num) {
                    var data = event.target;
                    var reader = new FileReader();
                    reader.onload = function () {
                        var dataURL = reader.result;
                        var offset = "preview" + String(num);
                        var output = document.getElementById(offset);
                        output.src = dataURL;
                    };
                    reader.readAsDataURL(data.files[0]);
                };
            </script>

        </div>
    </div>
</div>
</div>

<!-- 상세페이지 모달-->
<div id="modal_overlay" class="modal_overlay">
    <div id="close_btn" class="close_btn">
        X
    </div>
    <div class="modal">
        <div class="modal_left">
            <img src="/static/images/img_songhee_profile.png" class="modal_img">
        </div>

        <div class="modal_right">

            <div class="modal_header">
                <div class="modal_profile_img">
                    <img class="modal_profile_img_round" src="/static/images/img_profile.jpg" alt="Profile Image">
                </div>
                <div class="modal_user">
                    <div id="modal_user_name" class="modal_user_name">유저 아이디</div>

                </div>
                    <button class="following">팔로잉</button>

                <div class="modal_more">...</div>
            </div>

            <div class="modal_content">
                <div id="modal_img_description"   class="modal_img_description">
                    사진 설명 들어가기
                    <li class="modal_comment_list">

                    </li>
                </div>
                <ul id="comment-wrapper" class="comment-wrapper"></ul>
            </div>

            <div class="modal_icon_bar">
                    <button class="modal_like_icon" id="like_button3" onclick="clickLike(id)"><i
                            class="fa-regular fa-heart"></i>
                    </button>
                    <button class="modal_comment_icon"><i class="fa-regular fa-message"></i>
                    </button>
                    <button class="modal_share_icon"><i class="fa-solid fa-share-nodes"></i>
                    </button>
                    <button class="modal_bookmark_icon">
                        <i class="fa-regular fa-bookmark"></i>
                    </button>
                    <div class="like_count">
                        <button id="like_people" type="button" class="like_people" data-toggle="popover"
                                data-bs-content="Me, You, Someone1, Someone2, Someone3" placement="auto">5명
                        </button>
                        이 좋아요를 눌렀습니다.
                    </div>
            </div>
            <div id="modal_date" class="modal_date">
                시간날짜 들어가랏
            </div>
            <div class="modal_comment_write">
                <form id="comment">
                    <input type="text" placeholder="댓글 달기..." id="commentInput">
                    <button id="submit">게시</button>
                </form>
            </div>

        </div>
    </div>
</div>


</body>
</html>